---
# Install and configure rbw (Rust Bitwarden CLI)
# Packages (rbw, rofi-rbw, bitwarden-systemd) are handled by the packages role.
# User must run `rbw register && rbw login` after bootstrap.

- name: Create rbw config directory
  ansible.builtin.file:
    path: "{{ ansible_user_dir }}/.config/rbw"
    state: directory
    mode: "0700"

- name: Write rbw config
  ansible.builtin.copy:
    dest: "{{ ansible_user_dir }}/.config/rbw/config.json"
    mode: "0600"
    content: |
      {"email":"{{ user_email }}","lock_timeout":3600}

- name: Post-bootstrap reminder
  ansible.builtin.debug:
    msg: "Run: rbw register && rbw login && rbw sync"
